
步骤：
1. 配置好python环境
2. 在#General Graph -- Fetch_data中配置好自己的电脑端口 （设置--网络和internet--手动设置代理--使用代理服务器）
3. 在Fetch_data中指定币种和频率(1d/4h/1h)
4. 运行Fetch_data, 获取数据，文件保存为data_币种_daily.csv
5. 在General Graph中运行Graphing, 生成案例图像（默认一个月一个分段）
6. 更多全币种数据： https://pan.baidu.com/s/1hVYb6mkYvmE7EPxdqpQ7OQ?pwd=1212 提取码: 1212 
7. 部分案例数据和案例图像已生成，每次运行请注意命名区分
8. 目前案例给出的图像全部基于 #data_BTC_daily.csv 运行BCGH四张图生成前请注意覆盖问题



更新日志：


7.3
1. 重新整合1.0版本的数据获取/k-line ma图像绘制，wasted归类了目前 暂时 不太会用到的代码（乐）

2. #定义标签因子(alpha)为区分图像，对不同图像打tag (BUY/SELL/HOLD)的判断准则

3. Gramian在原作基础上新增2个因子  
   
   
 3.1 Average Return factor:
      该因子根据每个样本点向后15天的平均收益率进行分类，捕捉趋势延续信号。收益高的样本被标记为买入(buy)，收益低的标记为卖出(sell)，中间为持仓(hold)。目标是让模型学会识别上涨或下跌前常见的价格走势形态。
      
      #Alpha = 1/15*sum[(Ct+i - Ct)/ Ct,(0,15)]   #阈值0.8/0.2

 3.2 Volatility Shift factor:
     通过计算过去32天价格的标准差来衡量市场波动性，波动率处于底部40%的样本被视为低波动区域，标记为买入(buy)，其余为持仓（hold）。该因子假设低波动期可能预示价格即将突破，适合提前布局多头仓位。

      #Alpha = [Std(Rt...Rt+15) - Std(Rt-14...Rt)]/(Std(Rt-14...Rt))  #阈值0.4/-   这里无卖出，<0.4买入  >0.4全部hold

 3.3 Price Volume-factor:
     以当前价格在过去32日区间内的位置为依据进行分类：价格位于低位(前10%)标记为买入(buy)，高位(后10%)标记为卖出(sell)，其余为持仓(hold)。该因子尝试捕捉价格偏离后的回归机会，具备典型的高抛低吸风格。

      #Alpha = 1/3*[sum (Vt+i, (1,3))]-1/30*[sum vt-i, (0,20)]   #阈值0.9/0.1



4. Bar图舍弃原有的收盘价画图准则，新增K线强度因子逻辑，生成的图像柱分布于零轴上下

 4.1 kstrength-factor:
     衡量单日价格在波动区间内的开收盘偏移位置，用以反映多空力量对比；因子值为负表示当日收盘高于开盘，为多头主导，值为正则为空头主导；将该因子在7日滑动窗口内标准化后绘制为Bar图，图中采用红涨绿跌配色
     
     Alpha = (Open-Close)/(High-Low), 阈值0.33/0.66

     
       
5. Candle图舍弃原有的平均收益(该标签因子已用于Gramian) 
 
 5.1 Drawndown-factor:
     衡量当前价格相对过去15日高点的回撤幅度，用以捕捉高位风险释放或低位反弹机会；因子值越大，表示价格远离近期高点、潜在超跌，
     值越小则接近高点、可能短期见顶。将该因子作为标签依据，对每段5日K线窗口绘制蜡烛图，图中保留K线本体结构信息，通过33%/66%分位对回撤因子划分buy/hold/sell标签，用于训练图像分类模型以识别趋势衰竭与反转信号。
     


7.4

1. Heat图改用全新三因子
  
 3.1 Second-stage differential factor: 
      该因子为收盘价的二阶差分，定义为 Close(t) + Close(t-2) - 2 * Close(t-1)，本质上刻画的是价格序列的局部加速度，用于识别趋势的拐点结构。当因子值为负，表示价格出现加速上涨的形态，反映出多头主导；当值为正，则说明价格处于下跌加速阶段，空头占优。相比于一阶动量或简单涨跌幅，该因子对趋势斜率变化更敏感，能够更早地捕捉价格反转信号，在图像建模中提供重要的结构性信息。

      Alpha = close(t) + close(t-2) - 2 * close(t-1)   #阈值0.33/0.66

 3.2 Standarddized-close price factor:
      反映当前价格在窗口期内的相对高低位置，用于捕捉趋势走向与波段结构； 
      因子通过将当前15日窗口的收盘价线性归一化到 [0,1] 区间，构成图像的主视觉层；
      趋势向上的序列将呈现从低值到高值的颜色渐变，趋势向下则相反。
    
      #Alpha_G = (Close_t - min(Close_window)) / (max(Close_window) - min(Close_window))

 3.3 Partial Volatility (short-timed)
      衡量价格序列在短期内的波动强度，反映市场的不确定性；
      对于震荡行情呈现低亮度色块，对剧烈变动区域呈现高对比色块； 
      原始 5 日标准差经归一化处理后嵌入图像蓝色通道，构成辅助纹理特征。 
      
      #Alpha_B = std(Close_{t-4} to Close_t) 归一化后： (Alpha_B - min) / (max - min)

2. Heat 三个因子共同构成Heat图的RGB三通道，图像尺寸统一为224×224。不同于G图中每个因子各自生成图像并独立训练模型的方式，Heat图将三因子信息压缩在同一图像内，仅使用二阶加速度因子作为统一的分类依据进行打标签（33%以下为buy，66%以上为sell，其余为hold），构建单一的训练集和一套CNN模型。该方法能够降低建模复杂度，提高模型泛化能力，适用于快速部署与整体模式识别；而G图则更强调对因子本身的解释力和局部优势捕捉

   目前思路： heat图和Gramian图的两种生成方法代表了“多因子多模型”与“多因子融合单模型”前者便于因子归因与拆解，后者结构更紧凑、训 练效率更高且适合实际部署。
